---
title: JS笔记——BOM对象
date: 2018-06-15 13:40:06
tags:
	- JavaScript
categories: 前端
---


ES 标准是 JavaScript 核心，但是在 Web 中使用 JavaScript，BOM（浏览器对象模型）才是真正的核心。

W3C为了将浏览器中的 JavaScript 最基本的部分标准化，已经将 BOM 的主要方面纳入了 HTML5 规范。

<!--More-->

## 总览

BOM 主要由 window 对象、location 对象、navigator 对象、screen 对象、history 对象几部分， 如下图：

![总览](BOM.png)

## window 对象

* BOM的核心对象是window对象，表示一个浏览器的实例。
* window 对象同时还是 ES 规定的 Global 对象。

主要涉及以下几个部分内容：

![window对象](window.png)

### 全局作用域

在所有全局作用域中声明的变量、函数都会变成window对象的属性和方法。前提条件是，执行环境是在浏览器中。


``` js
var age = 10;
console.log(window.age); // 10
```

Global 对象和 window 对象差别：

**全局变量不能通过delete操作符删除，但是定义在window对象上定义的属性可以通过delete删除。**

``` js
var a = 10;
<!--在 IE 9 前会报错-->
delete window.a; // false
window.b = 20;
delete window.b; // true
```
这是为什么呢？

原因： 使用 var 语言添加的 window 属性的 [[Configurable]] 的特性值为false。

全局对象是一个逻辑上的概念，是不能够直接访问的，this指向全局对象，但是在浏览器中，this的指向就是window对象。因此window对象就是全局对象在浏览器中的具体表现。

[more >> ](https://blog.csdn.net/chenchunlin526/article/details/78908592)

### 窗口关系及框架
每个框架都有自己 window 对象，并且保存在 frames 集合中。

每个 window 对象都有一个 name 属性，其中包含框架名称。

访问框架：

* 索引： `window.frames[0]`
* 框架名称： `window.frames['topFrame']`
* ✨ top 对象： `top.frames[0]` （推荐）

#### top 对象
始终指向最外层框架，即浏览器窗口。

#### parent 对象
始终指向当前框架的直接上层框架。

#### self 对象
始终指向window。

#### 框架造成instanceof判断的问题
在使用框架的情况下，浏览器会存在多个window对象。每个框架中定义的全局变量会自动成为框架中window对象的属性。由于每个window对象都包含原生类型的构造函数，因此每个框架都有一套自己的构造函数，这些构造函数一一对应，但是却不相等。因此依赖原生的构造函数来判断类型的instanceof操作符就变得不可靠了。

### 窗口位置

#### screenRight，screenTop, screenX, screenY

跨浏览器取得窗口左边和上边的位置：

``` js
var leftPos = (typeof window.screenLeft === 'number') ?
	window.screenLeft : window.screenX;
var topPos = (typeof window.screenTop === 'number') ? 
	window.screenTop : window.screenY;
```

在 IE, Safari, Opera, Chrome 中可以根据 screenLeft 和 screenTop 这两个属性值获得浏览器左边和上边的值；Firefox 则是根据 screenX 和 screenY 来判断。

> 注： Oprea 虽然也支持 screenX 和 screenY，但是与 screenLeft 和 screenTop 并不对应。因此建议不要使用。

然鹅，在实际的使用上，还存在着问题，导致我们在跨浏览器的前提下，根本不能拿到窗口左边和上边的坐标。

不过我们可以通过下边两个方法将窗口精准的移动到一个新的位置：moveTo() 和 moveBy()。

#### moveTo(), moveBy()

* moveTo()

``` js 
// x,y 表示新位置坐标值
window.moveTo(x, y);
```

* moveBy()

``` js
// 表示水平和垂直方向需要移动的像素
window.moveBy(a, b)
```

然鹅，这两个方法有可能会被浏览器禁用, 并且这两个方法只能对最外层window对象使用，不适用于框架。

### 窗口大小

* innerWidth
* innerWidth
* outerHeight
* outerWidth


* resizeTo()
* resizeBy()

### 导航和打开窗口

window.open()

#### 弹出窗口



